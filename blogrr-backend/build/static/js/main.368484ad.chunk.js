(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{137:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(33),s=n.n(a),c=n(14),i=n.n(c),o=n(20),l=n(13),u=n(195),d=n(196),j=n(184),f=n(200),m=n(186),x=n(201),h=n(30),p=n.n(h),b="/api/blogs",g=null,O={getAll:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(b);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,p.a.post(b,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){g="bearer ".concat(e)},update:function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat(b,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,p.a.delete("".concat(b,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=n(1),w=function(e){var t=e.blogs,n=e.user,a=e.setBlogs,s=e.setErrorMessage,c=e.setSuccessMessage,i=Object(r.useState)(""),o=Object(l.a)(i,2),h=o[0],p=o[1],b=Object(r.useState)(!1),g=Object(l.a)(b,2),w=g[0],y=g[1],k=function(){y(!1)};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(u.a,{variant:"outlined",onClick:function(){y(!0)},children:"Create Blog"}),Object(v.jsxs)(d.a,{open:w,onClose:k,children:[Object(v.jsx)(j.a,{children:"Create new blog"}),Object(v.jsx)(f.a,{children:Object(v.jsx)(m.a,{placeholder:"Type Here",minRows:8,onChange:function(e){var t=e.target;return p(t.value)},style:{width:550,fontFamily:"Roboto",fontSize:15}})}),Object(v.jsxs)(x.a,{children:[Object(v.jsx)(u.a,{onClick:k,children:"Cancel"}),Object(v.jsx)(u.a,{onClick:function(e){e.preventDefault(),k();var r={title:h,author:n.name};O.create(r).then((function(e){c("Blog posted"),setTimeout((function(){c(null)}),5e3),p(""),a(t.concat(e))})).catch((function(e){s("Error: ".concat(e.response.data.error)),setTimeout((function(){s(null)}),5e3)}))},children:"create"})]})]})]})},y=n(193),k=n(198),S=n(144),C=n(202),D=function(e){var t=e.blog,n=e.user,r=e.handleLike,a=e.handleUnlike,s=e.handleRemove;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(y.a,{sx:{borderBottom:"1px solid rgb(212, 212, 212)"},children:Object(v.jsx)(k.a,{container:!0,sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"start"},children:Object(v.jsxs)(k.a,{item:!0,xs:12,sx:{display:"flex",flexDirection:"column"},children:[Object(v.jsx)(S.a,{sx:{fontSize:16,fontWeight:700,my:1},children:t.author}),Object(v.jsxs)(S.a,{sx:{fontSize:9,fontWeight:350,mb:1},children:[t.date.split("T")[0]," ",t.date.split("T")[1].split(".")[0]]}),Object(v.jsx)(S.a,{sx:{fontSize:16,fontWeight:200},children:t.title}),Object(v.jsxs)(C.a,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(v.jsxs)(S.a,{sx:{fontSize:12,fontWeight:500,mr:2},children:[t.likes.length," Likes"]}),t.likes.includes(n.id)?Object(v.jsx)(u.a,{variant:"text",size:"small",value:t.id,onClick:a,sx:{fontSize:10,fontWeight:500,mr:1},children:"Unlike"}):Object(v.jsx)(u.a,{variant:"text",size:"small",value:t.id,onClick:r,sx:{fontSize:10,fontWeight:500,mr:1},children:"Like"}),Object(v.jsx)(u.a,{variant:"text",size:"small",value:t.id,onClick:s,sx:{fontSize:10,fontWeight:500},children:"Delete"})]})]})})})})},B=n(199),F=n(203),z=function(e){var t=e.blogs,n=(e.users,e.handleLogout),r=e.user,a=e.setBlogs,s=(e.error,e.setErrorMessage),c=(e.success,e.setSuccessMessage),l=function(){var e=Object(o.a)(i.a.mark((function e(n){var s,c,o,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s=n.target.value,c=t.find((function(e){return e.id===s})),o=c.likes.concat(r.id),l={title:c.title,author:c.author,url:c.url,likes:o,user:c.user},e.next=7,O.update(s,l);case 7:u=e.sent,a(t.map((function(e){return e.id!==s?e:u})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(i.a.mark((function e(n){var s,c,o,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s=n.target.value,c=t.find((function(e){return e.id===s})),o=c.likes.filter((function(e){return e!==r.id})),l={title:c.title,author:c.author,url:c.url,likes:o,user:c.user},e.next=7,O.update(s,l);case 7:u=e.sent,a(t.map((function(e){return e.id!==s?e:u})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(o.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=n.target.value,!window.confirm("remove blog?")){e.next=15;break}return e.prev=3,e.next=6,O.remove(r);case 6:a(t.filter((function(e){return e.id!==r}))),c("Blog removed"),setTimeout((function(){c(null)}),2e3),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),s("Error: ".concat(e.t0.response.data.error)),setTimeout((function(){s(null)}),2e3);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(C.a,{container:!0,sx:{display:"flex",flexDirection:"column",justifyContent:"start",width:"100%",height:"90%",m:4},children:[Object(v.jsxs)(C.a,{item:!0,sx:{display:"flex",flexDirection:"row",justifyContent:"end",alignItems:"center",height:"5%",mr:3,mb:2},children:[Object(v.jsxs)(S.a,{sx:{mr:4},children:["Hello, ",r.name]}),Object(v.jsx)(u.a,{size:"small",variant:"outlined",onClick:n,children:"Log-out"})]}),Object(v.jsx)(C.a,{item:!0,component:B.a,elevation:9,sx:{display:"flex",flexDirection:"column",height:"90%",overflow:"auto",mb:3},children:Object(v.jsx)(F.a,{children:t.map((function(e){return Object(v.jsx)(D,{blog:e,user:r,handleLike:l,handleUnlike:d,handleRemove:j},e.id)}))})}),Object(v.jsx)(C.a,{item:!0,sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:Object(v.jsx)(w,{blogs:t,user:r,setBlogs:a,setErrorMessage:s,setSuccessMessage:c})})]})})},U=n(188),W=n(204),N=n(189),I=Object(N.a)((function(e){return{mainGrid:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",height:"100vh"},aboutGrid:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},contentGrid:{display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center",height:"100%"},authenticationBox:{display:"flex",flexDirection:"column",alignItems:"center",margin:"auto",width:"100%",borderLeft:"1px solid rgb(212, 212, 212)"},loginBox:{display:"flex",flexDirection:"column",alignItems:"center"},signupBox:{display:"flex",flexDirection:"column",alignItems:"center"}}})),L=function(e){var t=e.handleLogin,n=e.setUsername,r=e.setPassword,a=e.username,s=e.password,c=e.toggleClick,i=I();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(C.a,{component:"form",noValidate:!0,onSubmit:t,className:i.loginBox,children:[Object(v.jsx)(S.a,{component:"h2",variant:"h5",children:"Sign in"}),Object(v.jsx)(U.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Username",name:"email",autoComplete:"email",value:a,onChange:function(e){var t=e.target;return n(t.value)},autoFocus:!0,color:"success"}),Object(v.jsx)(U.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:s,onChange:function(e){var t=e.target;return r(t.value)},color:"secondary"}),Object(v.jsx)(u.a,{type:"submit",fullWidth:!0,variant:"outlined",sx:{mt:3,mb:2},color:"success",children:"Sign In"}),Object(v.jsx)(k.a,{container:!0,children:Object(v.jsxs)(k.a,{item:!0,sx:{display:"flex",flexDirection:"row"},children:[Object(v.jsx)(S.a,{sx:{mr:1},children:"Dont have an account yet?"}),Object(v.jsx)(W.a,{onClick:c,color:"rgb(0, 0, 0)",children:"Sign-up"})]})})]})})},T=function(e){var t=e.handleSignup,n=e.setUsername,a=e.setPassword,s=e.username,c=e.password,i=e.toggleClick,o=Object(r.useState)(""),d=Object(l.a)(o,2),j=d[0],f=d[1],m=Object(r.useState)(""),x=Object(l.a)(m,2),h=x[0],p=x[1],b=I();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(C.a,{component:"form",noValidate:!0,onSubmit:function(e){e.preventDefault();var n={username:s,name:"".concat(j," ").concat(h),password:c};t(n,i)},className:b.signupBox,children:[Object(v.jsx)(S.a,{component:"h2",variant:"h5",sx:{textAlign:"center"},children:"Sign Up"}),Object(v.jsxs)(k.a,{container:!0,sx:{justifyContent:"center"},children:[Object(v.jsx)(k.a,{item:!0,xs:12,sm:6,children:Object(v.jsx)(U.a,{margin:"normal",required:!0,fullWidth:!0,id:"firstName",label:"First Name",name:"firstName",autoComplete:"given-name",value:j,onChange:function(e){var t=e.target;return f(t.value)},autoFocus:!0,color:"success"})}),Object(v.jsx)(k.a,{item:!0,xs:12,sm:6,children:Object(v.jsx)(U.a,{margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name",value:h,onChange:function(e){var t=e.target;return p(t.value)},autoFocus:!0,color:"secondary"})})]}),Object(v.jsx)(U.a,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",value:s,onChange:function(e){var t=e.target;return n(t.value)},autoFocus:!0,color:"success"}),Object(v.jsx)(U.a,{margin:"normal",required:!0,fullWidth:!0,id:"password",label:"Password",name:"password",autoComplete:"new-password",type:"password",value:c,onChange:function(e){var t=e.target;return a(t.value)},autoFocus:!0,color:"secondary"}),Object(v.jsx)(u.a,{type:"submit",fullWidth:!0,variant:"outlined",color:"success",sx:{mt:3,mb:2,ml:4,mr:4},children:"Sign Up"}),Object(v.jsx)(k.a,{container:!0,sx:{justifyContent:"center"},children:Object(v.jsxs)(k.a,{item:!0,sx:{display:"flex",flexDirection:"row"},children:[Object(v.jsx)(S.a,{sx:{mr:1},children:"Already have an account?"}),Object(v.jsx)(W.a,{onClick:i,color:"rgb(0, 0, 0)",children:"Log-in"})]})})]})})},E=function(e){var t=e.handleLogin,n=e.handleSignup,a=e.setUsername,s=e.setPassword,c=e.username,i=e.password,o=e.error,u=e.success,d=I(),j=Object(r.useState)(!0),f=Object(l.a)(j,2),m=f[0],x=f[1],h=function(){x(!m)};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(C.a,{className:d.authenticationBox,children:!0===m?Object(v.jsx)(L,{handleLogin:t,setUsername:a,setPassword:s,username:c,password:i,error:o,success:u,toggleClick:h}):Object(v.jsx)(T,{handleSignup:n,setUsername:a,setPassword:s,username:c,password:i,error:o,success:u,toggleClick:h})})})},A=n(192),M=n(205),P=function(e){var t=e.error,n=e.success;return null!==t&&null===n?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(A.a,{severity:"error",children:[Object(v.jsx)(M.a,{children:"Error"}),t]})}):null===t&&null!==n?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(A.a,{severity:"success",children:[Object(v.jsx)(M.a,{children:"Success"}),n]})}):null},q={login:function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G="/api/users",J={getAll:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(G);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(G,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R=n(187),H=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)([]),c=Object(l.a)(s,2),u=c[0],d=c[1],j=Object(r.useState)(null),f=Object(l.a)(j,2),m=f[0],x=f[1],h=Object(r.useState)(null),p=Object(l.a)(h,2),b=p[0],g=p[1],w=Object(r.useState)(""),y=Object(l.a)(w,2),D=y[0],B=y[1],F=Object(r.useState)(""),U=Object(l.a)(F,2),W=U[0],N=U[1],L=Object(r.useState)(null),T=Object(l.a)(L,2),A=T[0],M=T[1],G=I();Object(r.useEffect)((function(){O.getAll().then((function(e){return a(e)})),J.getAll().then((function(e){return d(e)}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedBloglistUser");if(e){var t=JSON.parse(e);M(t),O.setToken(t.token)}}),[]);var H=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,q.login({username:D,password:W});case 4:n=e.sent,window.localStorage.setItem("loggedBloglistUser",JSON.stringify(n)),O.setToken(n.token),M(n),g("logged in succesfully"),setTimeout((function(){g(null)}),5e3),B(""),N(""),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),x("Wrong credentials"),N(""),setTimeout((function(){x(null)}),5e3);case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),window.localStorage.clear(),M(null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(R.a,{}),Object(v.jsxs)(k.a,{container:!0,component:"main",className:G.mainGrid,children:[Object(v.jsx)(k.a,{item:!0,xs:12,sm:12,md:5,lg:5,className:G.aboutGrid,children:Object(v.jsxs)(C.a,{container:!0,sx:{display:"flex",flexDirection:"column"},children:[Object(v.jsx)(P,{error:m,success:b}),Object(v.jsxs)(C.a,{item:!0,children:[Object(v.jsx)(S.a,{sx:{fontSize:100,fontFamily:"-moz-initial"},children:"Blogrr."}),Object(v.jsx)(S.a,{sx:{fontSize:15,fontFamily:"monospace",textAlign:"end",mb:6,pr:4},children:"a Single-page Blog App."})]}),Object(v.jsx)(S.a,{sx:{fontSize:15,fontFamily:"initial",mb:6},children:"Create an account and see blogs from other users."}),Object(v.jsxs)(S.a,{sx:{fontSize:15,fontFamily:"initial",mb:12},children:[Object(v.jsx)("strong",{children:"Made with:"})," MongoDB, Express, ReactJS, NodeJS "]}),Object(v.jsxs)(S.a,{sx:{fontSize:15,fontFamily:"initial",textAlign:"center"},children:["Copyright \xa9 ",Object(v.jsx)("a",{href:"https://blogrr-app.herokuapp.com/",children:"Blogrr"})," 2021"]})]})}),Object(v.jsx)(k.a,{item:!0,xs:12,sm:12,md:7,lg:7,square:!0,className:G.contentGrid,children:null===A?Object(v.jsx)(E,{handleLogin:H,handleSignup:function(e,t){J.create(e).then((function(e){g("User created. Please login to continue"),t(),setTimeout((function(){g(null)}),2e3),B(""),N("")})).catch((function(e){x("Error: ".concat(e.response.data.error)),setTimeout((function(){x(null)}),4e3)}))},setPassword:N,setUsername:B,username:D,password:W,error:m,success:b}):Object(v.jsx)(z,{blogs:n,users:u,handleLogout:V,user:A,setBlogs:a,error:m,setErrorMessage:x,success:b,setSuccessMessage:g})})]})]})};n(137);s.a.render(Object(v.jsx)(H,{}),document.getElementById("root"))}},[[138,1,2]]]);
//# sourceMappingURL=main.368484ad.chunk.js.map